<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="icon" href="images/icono.png" type="image/png">
    <div id="head"></div>
</head>

<body class="bg">
    <!-- Navegación -->
    <div id="header"></div>

    <!-- Filtros -->
    <section id="filters-wrapper" class="bg">
        <div id="filters" class="box container">
            <!-- Resetear Filtros -->
            <div class="reset-filters" style="position: absolute; top: 10px; right: 40px;">
                <button id="reset-filters-btn" title="Restablecer filtros" style="border: none; background: transparent; outline: none;">
                    <i class="fas fa-sync reset-icon" style="color: black;"></i>
                </button>
            </div>     
            <!-- Búsqueda -->
            <div class="search-icon animate-btn" style="position: absolute; top: 10px; right: 10px;">
                <button id="search-btn" title="Buscar" style="border: none; background: transparent; outline: none;">
                    <i class="fas fa-search" style="color: black;"></i>
                </button>
            </div>       
            <div class="section">
                <div class="col">
                    <label for="brand">Marca</label>
                    <select id="brand" name="brand" onchange="updateModels()">
                        <option value="all">Todas</option>
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="model">Modelo</label>
                    <select id="model" name="model" disabled>
                        <option value="">Todos</option>
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="province">Provincia</label>
                    <select id="province" name="province" onchange="updateCities()">
                        <option value="all">Todas</option>
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="city">Ciudad</label>
                    <select id="city" name="city" disabled>
                        <option value="">Todas</option>
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="mileage-from">Km Desde</label>
                    <select id="mileage-from" name="mileage-from">
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="mileage-to">Km Hasta</label>
                    <select id="mileage-to" name="mileage-to">
                        <!-- Opciones se generan con JS -->
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="year-from">Año Desde</label>
                    <select id="year-from" name="year-from">
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="year-to">Año Hasta</label>
                    <select id="year-to" name="year-to">
                        <!-- Opciones se generan con JS -->
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="horsepower-from">Caballos Desde</label>
                    <select id="horsepower-from" name="horsepower-from">
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="horsepower-to">Caballos Hasta</label>
                    <select id="horsepower-to" name="horsepower-to">
                        <!-- Opciones se generan con JS -->
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="price-from">Precio Desde</label>
                    <select id="price-from" name="price-from">
                        <!-- Opciones se generan con JS -->
                    </select>

                    <label for="price-to">Precio Hasta</label>
                    <select id="price-to" name="price-to">
                        <!-- Opciones se generan con JS -->
                    </select>
                </div>
            </div>

            <div class="divider-vertical"></div>
            <div class="divider-horizontal"></div>

            <div class="section">
                <div class="col">
                    <label for="fuel">Combustible</label>
                    <select id="fuel" name="fuel">
                        <!-- Opciones se generan con JS -->
                    </select>
            
                    <label for="transmission">Cambio</label>
                    <select id="transmission" name="transmission">
                        <!-- Opciones se generan con JS -->
                    </select>
                </div>
            </div>            
        </div>
    </section>

    <!-- Publicaciones -->
    <section id="cars" class="bg text-white">
        <div id="loading" class="loading" style="display: none;">
            <div class="loader container"></div>
        </div>
        <div id="publicaciones">
            <div class="container"></div>
            <!-- Controles de paginación -->
            <nav>
                <ul id="pagination" class="pagination justify-content-center"></ul>
            </nav>
        </div>    
    </section>

    <!-- Modal para detalles del vehículo -->
    <div class="modal fade modal-fullscreen" id="vehicleModal" tabindex="-1" role="dialog" aria-labelledby="vehicleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-fullscreen" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="vehicleModalLabel"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="container-fluid">
                        <!-- Imagen del carrusel -->
                        <div id="miCarrusel" class="carousel slide mb-4" data-ride="carousel">
                            <div class="carousel-inner">
                                <!-- Imágenes dinámicas -->
                            </div>
                            <a class="carousel-control-prev" href="#miCarrusel" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Anterior</span>
                            </a>
                            <a class="carousel-control-next" href="#miCarrusel" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Siguiente</span>
                            </a>
                        </div>
                        <!-- Detalles del vehículo y del usuario -->
                        <div class="modal-details-container">
                            <div id="modal-details">
                                <h4><strong>Datos del Vehículo:</strong></h4>
                                <p>Marca: <span id="modal-marca">${vehiculo ? vehiculo.marca : 'No disponible'}</span></p>
                                <p>Modelo: <span id="modal-modelo">${vehiculo ? vehiculo.modelo : 'No disponible'}</span></p>
                                <p>Motor: <span id="modal-motor">${vehiculo ? vehiculo.motor : 'No disponible'}</span></p>
                                <p>Año: <span id="modal-year">${vehiculo ? vehiculo.ano : 'No disponible'}</span></p>
                                <p>Kilometraje: <span id="modal-mileage">${vehiculo ? vehiculo.kilometraje : 'No disponible'}</span></p>
                                <p>CV: <span id="modal-cv">${vehiculo ? vehiculo.cv : 'No disponible'}</span></p>
                                <p>Precio: <span id="modal-price">${vehiculo ? vehiculo.precio : 'No disponible'}</span></p>
                                <p>Provincia: <span id="modal-province">${vehiculo ? vehiculo.provincia : 'No disponible'}</span></p>
                                <p>Ciudad: <span id="modal-city">${vehiculo ? vehiculo.ciudad : 'No disponible'}</span></p>
                                <p>Combustible: <span id="modal-fuel">${vehiculo ? vehiculo.combustible : 'No disponible'}</span></p>
                                <p>Transmisión: <span id="modal-transmission">${vehiculo ? vehiculo.transmision : 'No disponible'}</span></p>
                                <p>Imágenes:</p>
                                <div class="imagenes-vehiculo">
                                    ${vehiculo ? vehiculo.imagenes.map(url => `<img src="${url}" alt="Imagen del vehículo" style="width: 100px; height: auto; margin-right: 10px;" />`).join('') : '<p>No se pudo obtener imágenes del vehículo.</p>'}
                                </div>
                                <hr />
                                ${usuario ? 
                                    `<h4><strong>Datos del Usuario:</strong></h4>
                                    <p>Nombre: ${usuario.nombre}</p>
                                    <p>Email: ${usuario.email}</p>
                                    <p>Teléfono: ${usuario.telefono}</p>` 
                                    : '<p>No se pudo obtener información del usuario.</p>'}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- Footer -->
<footer>
    <div id="footer"></div>
</footer>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="scripts/script.js"></script>
<script src="scripts/data.js"></script>
<script src="scripts/filters.js"></script>
<script src="scripts/publications.js"></script>

<!-- Botón volver arriba -->
<a id="volverArriba" href="#" class="volver-arriba"><i class="fas fa-arrow-up"></i></a>

</html>